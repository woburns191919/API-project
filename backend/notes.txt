npm install && npm run build && npm run sequelize --prefix backend db:seed:undo:all && npm run sequelize --prefix backend db:migrate:undo:all && npm run sequelize --prefix backend db:migrate && npm run sequelize --prefix backend db:seed:all




1) roll back seed files
2) roll back migrations
3) db migrate (remigrate)
4) db seed (reseed)


in package json
"dbreset":
npx dotenv sequelize db:seed:undo:all && npx dotenv sequelize db:migrate:undo:all && npx dotenv sequelize db:migrate && npx dotenv sequelize db:seed:all



Delete render every time make new seed?

Rollback command?

Math on agg functions?

I made a minor change to a seeder file. Render was not happy. Is there a better way-- rather than deleting the postgress instance entirely--to resolve this render build error?


include username with spot from id--this okay?





3) Hello again! I'm (still) currently working on 'Get all reviews for a current user' for Air bnb, and I'm having trouble retrieving the 'reviewImages' associated--this is my only real issue with the route. Whenever I try to 'findAll' where the id's match up, I get either null or an empty array. Is this an issue with my methods? I would appreciate any help available. I'm not attempting to return any JSON at this particular moment.







1) Get Current User: authentication: true, how to log out
2) Edit a spot--accepting invalid body info
3) delete spot--how to check if authenticated user, how to check if owner is owner of spot


Delete User--authorization check




  errors: { credential: 'Please provide a valid email or username.' } vs  "credential": "Email or username is required"
  on Log In User error response





questions for standup:

1) authentication current user vs null?
2) exact error messages, besides the custom validations in put spots/:spotId
3) sign up/log in every time? token? have to go through sign up, login each time
4) associations with reviews?


making changes

dan notes:

1. When there is no preview image, we can either return null or “no preview image”

2. When there is a preview image, preview: false, we still want to return null or “no preview image”

3. Where there is a preview image, preview: true, we want to return the url

4. Where there are multiple preview images, preview: true, we want to return the latest preview: true, and the old preview:true image needs to be updated to preview: false


most basic default page size pagination

add keys


http//image.com

wk13 monday: tips on comparing dates in sequelize




3) I'm currently working on 'edit a review'. I'm unable to get past the 'review.update is not a function' error. I thought I'd defined 'review' above, and I assumed that 'update' was a valid method for this.

--------

url.url etc on /spots/id
url.url etc on /spots/current

check delete and post routes from dan messages

edit review  not an issue

all dates format?

today's date on current bookign post?


throw forbidden error before not found in bookings delete route, delete spotimage route, delete reviewimage route


-------


from spots route


 // let ownedSpotArr = [];
    // bookings.forEach((ownedSpot) => {
    //   ownedSpotArr.push(ownedSpot.toJSON());
    // });

    // ownedSpotArr.forEach((ownedSpotObj) => {
    //   console.log('ownedSpot******************************', ownedSpotObj)
    //   // let newStartDate = ownedSpotObj.startDate.toISOString().split("T")[0];
    //   // delete ownedSpotObj.startDate;
    //   // ownedSpotObj.startDate = newStartDate;

    //   // let endDate = ownedSpotObj.endDate.toISOString().split("T")[0];
    //   // delete ownedSpotObj.endDate;
    //   // ownedSpotObj.endDate = endDate;
    // });


     // bookedSpotArr.forEach((bookedSpotObj) => {

    //   // let newStartDate = bookedSpotObj.startDate.toISOString().split("T")[0];
    //   delete bookedSpotObj.startDate;
    //   bookedSpotObj.startDate = newStartDate;

    //   let endDate = bookedSpotObj.endDate.toISOString().split("T")[0];
    //   delete bookedSpotObj.endDate;
    //   bookedSpotObj.endDate = endDate;
    // });
